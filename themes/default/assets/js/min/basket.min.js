$(function(){var e=new Array;e[0]={id:1,count:1,price:1100},e[1]={id:2,count:1,price:1200},e[2]={id:3,count:1,price:1300},$.cookie("products",JSON.stringify(e)),$(document).ready(function(){$(".price_all_products span").html(number_format(o(),0,"."," "))}),$(".count_product input").on("change",function(){$(this).val()<1&&$(this).val(1),$(this).parent().next(".price_product").children("span").html(number_format($(this).val()*$(this).data("price"),0,"."," ")),$(".price_all_products span").html(number_format(o(),0,"."," ")),$(document).triggerHandler("changeProducts")}),$("input#order-complete-button").on("click",function(){var e=$("#modal-order");return $.modal(e,{minHeight:320,minWidth:300,maxHeight:320,maxWidth:300,opacity:80,overlayClose:!0,focus:!1,autoResize:!1,onShow:function(){$("#modal-order input[name='phone']").mask("8(999)999-99-99"),options={submitHandler:function(e){return r(e),!1},errorClass:"control-group error",rules:{name:{required:!0,russian:!0,maxlength:250},phone:{required:!0}},errorPlacement:function(e,r){var n;return n=r.attr("name"),t(e.text(),r)},highlight:function(e,t){return $(e).addClass(t)},unhighlight:function(e,t){return $(e).removeClass(t)}},e.find("form").validate(options)}}),!1}),$("a#big-order-complete-button").on("click",function(){$("#modal-order input[name='name']").val().length>1&&$("#modal-order-big input[name='name']").val($("#modal-order input[name='name']").val()),$("#modal-order input[name='phone']").val().length>1&&$("#modal-order-big input[name='phone']").val($("#modal-order input[name='phone']").val()),$.modal.close();var e=$("#modal-order-big");return $.modal(e,{minHeight:530,minWidth:300,maxHeight:530,maxWidth:300,opacity:80,overlayClose:!0,focus:!1,autoResize:!1,onShow:function(){$("#modal-order-big input[name='phone']").mask("8(999)999-99-99"),options={submitHandler:function(e){return r(e),!1},errorClass:"control-group error",rules:{name:{required:!0,russian:!0,maxlength:250},email:{required:!0,email:!0,maxlength:250},phone:{required:!0,maxlength:16,minlength:14},address:{required:!0,minlength:10,maxlength:1e3},delivery:{required:!0},pay:{required:!0},messages:{maxlength:1e3}},errorPlacement:function(e,r){var n;return n=r.attr("name"),t(e.text(),r)},highlight:function(e,t){return $(e).addClass(t)},unhighlight:function(e,t){return $(e).removeClass(t)}},e.find("form").validate(options)}}),!1}),$(".del_product a").on("click",function(){var e=$(this);return n(e),!1});var t=function(e,t){t.popover("destroy"),t.popover({animation:!0,placement:"top",trigger:"focus",content:e})},r=function(){ajaxload(),setTimeout(function(){$.modal.close(),$("#modal-order-true").modal({minHeight:280,minWidth:300,maxHeight:280,maxWidth:300,opacity:80,overlayClose:!0,focus:!1,autoResize:!1})},1e3)},n=function(e){2===$("#basket-list tbody tr").length?($(".basket .order-complete").fadeOut(500),e.parents("#basket-list").fadeOut(500,function(){$(this).remove(),$.cookie("products",null),$(document).triggerHandler("changeProducts"),$("div.basket").html("<p>В вашей корзине товаров нет.</p>")})):e.parents("tr").fadeOut(500,function(){$(this).remove(),$(".price_all_products span").html(number_format(o(),0,"."," ")),$(document).triggerHandler("changeProducts")})},o=function(){var e=0,t=new Array;return $(".count_product input").each(function(r,n){e+=$(n).data("price")*$(n).val(),t[r]={id:$(n).data("id"),count:$(n).val(),price:$(n).data("price")}}),$.cookie("products",JSON.stringify(t)),e}});
//# sourceMappingURL=basket.min.js.map